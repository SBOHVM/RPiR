<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Practical A-3: Naming of things</title>

<!-- HEAD_CONTENT -->

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div id="section-header">



<h1 class="title toc-ignore">Practical A-3: Naming of things</h1>

</div>


<div id="section-naming-of-things" class="section level2">
<h2>Naming of things</h2>
<div id="section-dots-and-underscores" class="section level3">
<h3>Dots and underscores</h3>
<p>You may have noticed that my functions in A-2 were called things like
<code>add_one</code> (with an underscore), but my variables had names
like <code>one.more</code> (with a dot). This was deliberate. Variables
and functions should be made up of one or more words (or abbreviations)
to make it easy to understand what they do. However, it can be hard to
read names just stuck together like <code>addtwonumberstogether</code>,
whereas <code>add_two_numbers_together</code> is easier. However, there
are boring reasons to do with how R works why it’s a bad idea to write R
functions with dots in their names (even though many functions in R
already have dots). As a result, in these practicals, I insist that you
don’t uses dots in function names when you write them.</p>
<p>However, dots are generally okay in variables names, so to make it
easy to distinguish normal variables from functions, I choose to put
dots in variable names (as <code>one.more</code>). You can do whatever
you like.</p>
<p>Here’s a function that takes two arguments and adds them together
(yes, it is just reinventing <code>+</code>!):</p>
<pre class="r"><code>add.up &lt;- function(first, second) {
  added_together &lt;- first + second
  added_together
}

add.up(10, 30)
&gt; [1] 40</code></pre>
<pre class="r"><code>add_up &lt;- function(first, second) {
  added.together &lt;- first + second
  added.together
}

add_up(10, 30)
&gt; [1] 40</code></pre>
<pre class="r"><code>grade_this_code()
&gt; function (check_env) 
&gt; {
&gt;     if (is_empty_code(check_env[[&quot;.user_code&quot;]])) {
&gt;         return(grade_code_is_empty())
&gt;     }
&gt;     check_env[[&quot;.__correct&quot;]] &lt;- correct
&gt;     check_env[[&quot;.__incorrect&quot;]] &lt;- incorrect
&gt;     check_env[[&quot;.__action&quot;]] &lt;- action
&gt;     grade &lt;- with_options(list(gradethis.allow_partial_matching = allow_partial_matching, 
&gt;         gradethis.maybe_code_feedback = TRUE), grade_this({
&gt;         .message &lt;- code_feedback()
&gt;         if (is.null(.message)) {
&gt;             if (&quot;pass&quot; %in% get(&quot;.__action&quot;)) {
&gt;                 pass(get(&quot;.__correct&quot;))
&gt;             }
&gt;         }
&gt;         else {
&gt;             if (&quot;fail&quot; %in% get(&quot;.__action&quot;)) {
&gt;                 fail(get(&quot;.__incorrect&quot;), hint = FALSE)
&gt;             }
&gt;         }
&gt;         invisible(NULL)
&gt;     })(check_env))
&gt;     if (is.null(grade)) {
&gt;         return(invisible(NULL))
&gt;     }
&gt;     class(grade) &lt;- c(&quot;gradethis_graded_this_code&quot;, class(grade))
&gt;     grade
&gt; }
&gt; &lt;bytecode: 0x7f94e6634008&gt;
&gt; &lt;environment: 0x7f94eb368270&gt;</code></pre>
<p>Rename the function and variables in <em>Exercise 2</em> so that it
satisfies my naming rules.</p>
<p><em>There is much more on how to style your code to make it more
consistent <a href="http://adv-r.had.co.nz/Style.html">here</a>. Hadley
recommends never using dots, so using underscores to separate words in
functions and variables. If you want to do that it’s fine. Don’t use
dots in function names though. He has lots of other suggestions about
how to write clear code - do have a look at it and try to follow it if
you have time.</em></p>
</div>
<div id="section-not-reusing-names" class="section level3">
<h3>Not reusing names</h3>
<p>In <em>Exercise 1</em>, we showed that variables used in functions
don’t affect what happens outside the function. Unfortunately, the
reverse isn’t true. Look at this function:</p>
<pre class="r"><code>missing_add &lt;- function(first) {
  first + second
}

missing_add(10)
&gt; Error in missing_add(10): object &#39;second&#39; not found</code></pre>
<p>This function was intended to be like <code>add_up()</code> in
<em>Exercise 2</em>, but I accidentally forgot to add the second
argument. Fortunately if you run it, it will give an error (try it).
However, what happens if you have defined a variable called
<code>second</code> elsewhere in your script? Try adding the following
at line 4:</p>
<pre class="r"><code>second &lt;- 1</code></pre>
<p><code>missing_add(10)</code> should no longer give an error, and
return <code>11</code>. Try changing <code>second</code> to 2 -
<code>missing_add(10)</code> should now return <code>12</code>. That’s
not good news - what the function does depends on what else you may have
done in your script. When you call a function it should always do the
same if you give it the same arguments.</p>
<p>This gets even worse when you account for our ability to misspell
things:</p>
<pre class="r"><code>misspelled_add &lt;- function(first, second) {
  resuIt &lt;- first + second
  result
}

result &lt;- -5
misspelled_add(10, 20)
&gt; [1] -5
misspelled_add(1, 2)
&gt; [1] -5</code></pre>
<div id="section-misspelling-hint">
<p><strong>Hint:</strong> If you can’t see the problem see how the word
<code>result</code> is spelled in different places.</p>
</div>
<p>You should find that <code>misspelled_add()</code> gives the wrong
answer even though the code looks right (if you don’t look too closely).
This problem can (and does!) cause hours of agony to some students every
year on this course. As a result, we insist on two things in your
submitted practicals:</p>
<ol style="list-style-type: decimal">
<li>You use different variable names in your functions than in your
scripts, wherever possible. Sometimes there really only is one sensible
name for a variable (maybe <code>timestep</code> when describing the
increments in your simulation model), and you should be very careful
when that happens, but normally there are at least two ways of
describing the same idea - often one more general in a function
(<code>birth.rate</code>) which can be used in multiple contexts, and
then specific in your main script each time you use it
(<code>human.annual.birth.rate</code>, for instance).</li>
<li>You write checks for your functions to make sure they aren’t
accidentally missing any variables or arguments. There are two tools for
this, <code>findGlobals()</code> and <code>checkUsage()</code> in the
<code>codetools</code> library.</li>
</ol>
<p>Try adding the following lines to the end of <em>Exercise 4</em>:</p>
<pre class="r"><code>library(codetools)
checkUsage(misspelled_add)</code></pre>
<p>You’ll see that it reports on the problem that you have probably
already identified. It can also identify other problems, and we
recommend it to you. However, it doesn’t return anything you can use in
your code to allow us to automatically reject bad functions, and we’ll
show you how to do this in a later practical. For now just try using
this line instead of <code>checkUsage()</code> above (the
<code>library()</code> call is the same):</p>
<pre class="r"><code>findGlobals(misspelled_add, merge = FALSE)</code></pre>
<p>You’ll see that it identifies the use of the global variable
<code>result</code> too (if less elegantly). We’ll show you how to use
this to automatically detect problems with variable misnaming in a later
exercise, but for now just remember that you need to watch out for
misspelling very carefully.</p>
<p><em>If you’re interested, the <code>findGlobals()</code> output also
tells you why this problem exists in R. You’ll see that the function
<code>misspelled_add()</code> needs to use three other </em>global*
variables - the functions <code>{</code>, <code>+</code> and
<code>&lt;-</code> - to get the function to work. As a result of the way
R works, functions have to be able to see what is going on outside to be
able to work at all. Most languages handle this more elegantly.*</p>
<p>Functions are covered in R4DS <a
href="https://r4ds.had.co.nz/functions.html">here</a> and R Coder covers
them in some depth <a href="https://r-coder.com/function-r">here</a>.
Advanced R covers functions in enormous detail starting <a
href="https://adv-r.hadley.nz/fp.html">here</a> with an introduction to
functional programming, and continuing for several chapters.</p>

<script type="application/shiny-prerendered" data-context="server-start">
library(learnr)
tutorial_options(exercise.reveal_solution = FALSE)
gradethis::gradethis_setup()

knitr::opts_chunk$set(
  collapse = TRUE,
  comment = ">",
  error = TRUE
)
set.seed(123)
</script>

<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["header-attrs"]},{"type":"character","attributes":{},"value":["2.18"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pandoc"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["header-attrs.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.18"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/bootstrap.min.css"]},{"type":"character","attributes":{},"value":["<style>h1 {font-size: 34px;}\n       h1.title {font-size: 38px;}\n       h2 {font-size: 30px;}\n       h3 {font-size: 24px;}\n       h4 {font-size: 18px;}\n       h5 {font-size: 16px;}\n       h6 {font-size: 12px;}\n       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}\n       pre:not([class]) { background-color: white }<\/style>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.18"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.18"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.18"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87]}},"value":[{"type":"character","attributes":{},"value":["backports","base","bslib","cachem","callr","checkmate","cli","codetools","colorspace","commonmark","compiler","crayon","curl","datasets","deSolve","devtools","digest","dplyr","ellipsis","evaluate","fansi","fastmap","fs","generics","ggplot2","glue","gradethis","graphics","grDevices","grid","gtable","here","highr","htmltools","htmlwidgets","httpuv","jquerylib","jsonlite","knitr","later","learnr","lifecycle","magrittr","markdown","MASS","memoise","methods","mime","miniUI","munsell","pillar","pkgbuild","pkgconfig","pkgload","prettyunits","processx","profvis","promises","ps","purrr","R6","Rcpp","remotes","rlang","rmarkdown","RPiR","rprojroot","rstudioapi","sass","scales","sessioninfo","shiny","stats","stringi","stringr","tibble","tidyselect","tools","urlchecker","usethis","utf8","utils","vctrs","withr","xfun","xtable","yaml"]},{"type":"character","attributes":{},"value":["1.4.1","4.2.2","0.4.1","1.0.6","3.7.3","2.1.0","3.4.1","0.2-18","2.0-3","1.8.1","4.2.2","1.5.2","4.3.3","4.2.2","1.34","2.4.5","0.6.30","1.0.10","0.3.2","0.18","1.0.3","1.1.0","1.5.2","0.1.3","3.4.0","1.6.2","0.2.11.9000","4.2.2","4.2.2","4.2.2","0.3.1","1.0.1","0.9","0.5.3","1.5.4","1.6.6","0.1.4","1.8.3","1.41","1.3.0","0.11.2.9000","1.0.3","2.0.3","1.4","7.3-58.1","2.0.1","4.2.2","0.12","0.1.1.1","0.5.0","1.8.1","1.3.1","2.0.3","1.3.2","1.1.1","3.8.0","0.3.7","1.2.0.1","1.7.2","0.3.5","2.5.1","1.0.9","2.4.2","1.0.6","2.18","0.76.9","2.0.3","0.14","0.4.3","1.2.1","1.2.2","1.7.3","4.2.2","1.7.8","1.4.1","3.1.8","1.2.0","4.2.2","1.0.1","2.1.6","1.2.2","4.2.2","0.5.1","2.5.0","0.35","1.8-4","2.3.6"]}]}]}
</script>
<!--/html_preserve-->
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
